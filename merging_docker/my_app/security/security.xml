<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <!-- 앱 카테고리 -->
        <record id="module_category_my_app" model="ir.module.category">
            <field name="name">내 앱</field>
            <field name="description">내 커스텀 앱에 대한 접근 권한</field>
            <field name="sequence">20</field>
        </record>

        <!-- 사용자 그룹 -->
        <record id="group_my_app_user" model="res.groups">
            <field name="name">내 앱 사용자</field>
            <field name="category_id" ref="module_category_my_app"/>
            <field name="comment">내 앱의 기본 기능을 사용할 수 있습니다</field>
        </record>

        <!-- 관리자 그룹 -->
        <record id="group_my_app_manager" model="res.groups">
            <field name="name">내 앱 관리자</field>
            <field name="category_id" ref="module_category_my_app"/>
            <field name="implied_ids" eval="[(4, ref('group_my_app_user'))]"/>
            <field name="comment">내 앱의 모든 기능을 관리할 수 있습니다</field>
        </record>

        <!-- 사용자 폼 뷰 확장 -->
        <record id="view_users_form_inherit_my_app" model="ir.ui.view">
            <field name="name">res.users.form.inherit.my_app</field>
            <field name="model">res.users</field>
            <field name="inherit_id" ref="base.view_users_form"/>
            <field name="arch" type="xml">
                <xpath expr="//page[@name='access_rights']" position="inside">
                    <group string="내 앱 권한" name="my_app_rights">
                        <field name="groups_id" widget="many2many_tags" 
                               domain="[('name', 'in', ['내 앱 사용자', '내 앱 관리자'])]"
                               string="내 앱 역할"
                               help="이 사용자의 내 앱 접근 수준을 선택하세요"/>
                    </group>
                </xpath>
            </field>
        </record>
    </data>
</odoo> 